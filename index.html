<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Owen Burguer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
:root{
--bg:#f2f2f2;
--card:#ffffff;
--text:#111;
--primary:#ff7a00;
--danger:#e53935;
--shadow:0 6px 18px rgba(0,0,0,0.08);
}
body{margin:0;font-family:Poppins,sans-serif;background:var(--bg);color:var(--text);}
header{background:linear-gradient(135deg,#ff7a00,#ffb347);color:#fff;padding:20px;text-align:center;font-size:22px;font-weight:700;}
.products{padding:15px;padding-bottom:110px;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;}
.card{background:var(--card);border-radius:15px;box-shadow:var(--shadow);overflow:hidden;cursor:pointer;transition:.3s;}
.card:hover{transform:scale(1.03);}
.card:active{transform:scale(0.97);}
.card img{width:100%;height:120px;object-fit:cover;}
.card h4{margin:10px;font-size:14px;}
.price{margin:0 10px 10px;font-weight:700;color:var(--primary);}
button{background:var(--primary);border:none;padding:10px 15px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;margin:5px;transition:0.2s;}
button:active{transform:scale(0.92);}
.btn-danger{background:var(--danger);}
.bottom-nav{position:fixed;bottom:0;width:100%;background:var(--card);display:flex;justify-content:space-around;padding:10px 0;box-shadow:0 -3px 10px rgba(0,0,0,0.1);}
.nav-item{text-align:center;font-size:12px;cursor:pointer;position:relative;}
.nav-item.active{color:var(--primary);font-weight:700;}
.badge{position:absolute;top:-5px;right:15px;background:red;color:#fff;font-size:10px;padding:2px 6px;border-radius:50px;display:none;}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:999;}
.modal-content{background:var(--card);width:90%;max-width:400px;border-radius:20px;padding:20px;text-align:center;}
.cart-item{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;background:var(--card);padding:8px;border-radius:10px;}
.total{font-weight:700;margin-top:10px;font-size:16px;}
input{width:90%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ccc;font-family:Poppins;}
iframe{width:100%;height:200px;border-radius:10px;margin-top:10px;border:none;}
</style>
</head>

<body>

<header><span id="secretAdmin">üçî</span> Owen Burguer</header>

<div id="menu" class="products"></div>

<div class="modal" id="cartModal">
<div class="modal-content">
<h3>üõí Tu Pedido</h3>
<div id="cartContent"></div>
<div class="total" id="cartTotal"></div>
<br>
<button onclick="openUserModal()">Tus Datos</button>
<button onclick="closeCart()">Cerrar</button>
</div>
</div>

<div class="modal" id="userModal">
<div class="modal-content">
<h3>üìã Tus Datos</h3>
<input type="text" id="nombre" placeholder="Nombre">
<input type="text" id="apellido" placeholder="Apellido">
<button onclick="getLocation()">Obtener Ubicaci√≥n</button>
<div id="mapContainer"></div>
<br>
<button onclick="confirmOrder()">Enviar Pedido</button>
<button class="btn-danger" onclick="closeUserModal()">Cancelar</button>
</div>
</div>

<div class="modal" id="alertModal">
<div class="modal-content">
<h3>Pedido Generado</h3>
<p>Tu pedido se ha generado correctamente.</p>
<button onclick="sendOrder()">Aceptar</button>
<button class="btn-danger" onclick="closeAlert()">Cerrar</button>
</div>
</div>

<div class="bottom-nav">
<div class="nav-item active" onclick="showCategory('Hamburguesas',this)">üçî<br>Hamburguesas</div>
<div class="nav-item" onclick="showCategory('Perros',this)">üå≠<br>Perros</div>
<div class="nav-item" onclick="showCategory('Bebidas',this)">ü•§<br>Bebidas</div>
<div class="nav-item" onclick="openCart()">üõí<br>Carrito
<span class="badge" id="cartBadge">0</span>
</div>
</div>

<script>

const categories={
Hamburguesas:[{name:"Cl√°sica",price:5},{name:"Doble Carne",price:7}],
Perros:[{name:"Tradicional",price:4}],
Bebidas:[{name:"Coca Cola",price:1.5}]
};

let cart=JSON.parse(localStorage.getItem("cart"))||{};
let currentCategory="Hamburguesas";
let userLocation="";

function saveCart(){localStorage.setItem("cart",JSON.stringify(cart));updateBadge();}
function updateBadge(){let total=0;for(let i in cart){total+=cart[i].qty;}let badge=document.getElementById("cartBadge");badge.innerText=total;badge.style.display=total>0?"inline-block":"none";}

function showCategory(cat,el){currentCategory=cat;document.querySelectorAll(".nav-item").forEach(i=>i.classList.remove("active"));if(el)el.classList.add("active");renderMenu();}
function renderMenu(){let menu=document.getElementById("menu");menu.innerHTML="";categories[currentCategory].forEach(prod=>{let card=document.createElement("div");card.className="card";card.innerHTML=`<h4>${prod.name}</h4><div class="price">$${prod.price}</div>`;card.onclick=()=>{if(!cart[prod.name])cart[prod.name]={...prod,qty:0};cart[prod.name].qty++;saveCart();};menu.appendChild(card);});}

/* ====== CARRITO CORREGIDO ====== */

function openCart(){
let modal=document.getElementById("cartModal");
let content=document.getElementById("cartContent");
let totalBox=document.getElementById("cartTotal");

content.innerHTML="";
let total=0;
let hasItems=false;

for(let item in cart){
hasItems=true;
let div=document.createElement("div");
div.className="cart-item";
div.innerHTML=`${item} x${cart[item].qty} <button onclick="removeItem('${item}')">‚ùå</button>`;
content.appendChild(div);
total+=cart[item].price*cart[item].qty;
}

if(!hasItems){
content.innerHTML="<p>No hay productos en el carrito.</p>";
totalBox.innerHTML="";
}else{
totalBox.innerHTML="Total: $"+total;
}

modal.style.display="flex";
}

function closeCart(){document.getElementById("cartModal").style.display="none";}
function removeItem(name){delete cart[name];saveCart();openCart();}

/* ====== MODALES ====== */

function openUserModal(){document.getElementById("cartModal").style.display="none";document.getElementById("userModal").style.display="flex";}
function closeUserModal(){document.getElementById("userModal").style.display="none";}
function closeAlert(){document.getElementById("alertModal").style.display="none";}

/* ====== UBICACI√ìN ====== */

function getLocation(){
navigator.geolocation.getCurrentPosition(pos=>{
let lat=pos.coords.latitude;
let lng=pos.coords.longitude;
userLocation=`https://www.google.com/maps?q=${lat},${lng}`;
document.getElementById("mapContainer").innerHTML=
`<iframe src="https://maps.google.com/maps?q=${lat},${lng}&z=15&output=embed"></iframe>`;
});
}

/* ====== ENV√çO ====== */

function confirmOrder(){
let nombre=document.getElementById("nombre").value.trim();
let apellido=document.getElementById("apellido").value.trim();
if(!nombre||!apellido||!userLocation){alert("Completa todos los datos");return;}
document.getElementById("userModal").style.display="none";
document.getElementById("alertModal").style.display="flex";
}

function sendOrder(){
cart={};
saveCart();
closeAlert();
}

/* ====== ADMIN 5 SEGUNDOS ====== */

let pressTimer;
const secretAdmin=document.getElementById("secretAdmin");
secretAdmin.addEventListener("mousedown",()=>pressTimer=setTimeout(()=>window.location.href="admin.html",5000));
secretAdmin.addEventListener("mouseup",()=>clearTimeout(pressTimer));
secretAdmin.addEventListener("touchstart",()=>pressTimer=setTimeout(()=>window.location.href="admin.html",5000));
secretAdmin.addEventListener("touchend",()=>clearTimeout(pressTimer));

renderMenu();
updateBadge();

</script>
</body>
</html>