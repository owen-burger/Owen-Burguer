<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vzla Cash</title>

<style>
:root{
--bg:#0f172a;
--card:#1e293b;
--accent:#f59e0b;
--text:#fff;
}

body{
margin:0;
font-family:Arial, sans-serif;
background:var(--bg);
color:var(--text);
}

header{
background:var(--card);
padding:15px;
text-align:center;
font-size:22px;
font-weight:bold;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:15px;
padding:15px;
}

.card{
background:var(--card);
border-radius:15px;
padding:10px;
text-align:center;
transition:0.2s;
}

.card:hover{
transform:scale(1.05);
}

.card img{
width:100%;
height:120px;
object-fit:cover;
border-radius:10px;
}

button{
background:var(--accent);
border:none;
padding:10px;
margin-top:8px;
border-radius:10px;
cursor:pointer;
font-weight:bold;
}

#cartBtn{
position:fixed;
bottom:20px;
right:20px;
background:var(--accent);
padding:15px;
border-radius:50%;
font-size:20px;
cursor:pointer;
}

.modal{
position:fixed;
inset:0;
background:rgba(0,0,0,0.6);
display:none;
justify-content:center;
align-items:center;
}

.modal-content{
background:var(--card);
padding:20px;
border-radius:15px;
width:90%;
max-width:400px;
max-height:90vh;
overflow:auto;
}

.close{
float:right;
cursor:pointer;
font-size:20px;
}

input{
width:100%;
padding:8px;
margin:5px 0;
border-radius:8px;
border:none;
}

.cart-item{
display:flex;
align-items:center;
justify-content:space-between;
margin-bottom:10px;
}

.cart-item img{
width:50px;
height:50px;
object-fit:cover;
border-radius:8px;
}

.delete{
background:red;
color:white;
border:none;
border-radius:6px;
padding:5px;
cursor:pointer;
}
</style>
</head>

<body>

<header>üçî Vzla Cash</header>

<div class="grid" id="products"></div>

<div id="cartBtn">üõí</div>

<!-- MODAL CARRITO -->
<div class="modal" id="cartModal">
<div class="modal-content">
<span class="close" onclick="closeModal('cartModal')">‚úñ</span>
<h3>Tu Carrito</h3>
<div id="cartItems"></div>
<br>
<button onclick="openDatos()">Tus Datos</button>
</div>
</div>

<!-- MODAL DATOS -->
<div class="modal" id="datosModal">
<div class="modal-content">
<span class="close" onclick="closeModal('datosModal')">‚úñ</span>
<h3>Tus Datos</h3>

<input type="text" id="nombre" placeholder="Nombre" required>
<input type="text" id="apellido" placeholder="Apellido" required>

<button onclick="obtenerUbicacion()">Obtener Ubicaci√≥n</button>
<p id="ubicacionTexto" style="font-size:13px;"></p>

<button onclick="validarEnvio()">Enviar Pedido</button>
</div>
</div>

<!-- MODAL ALERTA -->
<div class="modal" id="alertModal">
<div class="modal-content">
<h3 id="alertText"></h3>
<div id="alertButtons"></div>
</div>
</div>

<script>

let productos = [
{nombre:"Hamburguesa",precio:5,img:"https://i.imgur.com/8Km9tLL.jpg"},
{nombre:"Pizza",precio:8,img:"https://i.imgur.com/6X4K3Jx.jpg"},
{nombre:"Perro Caliente",precio:4,img:"https://i.imgur.com/Z8hKZgC.jpg"}
];

let carrito = [];
let ubicacionLink = "";
let latitud = "";
let longitud = "";

function renderProductos(){
const container = document.getElementById("products");
container.innerHTML="";
productos.forEach((p,i)=>{
container.innerHTML+=`
<div class="card">
<img src="${p.img}">
<h4>${p.nombre}</h4>
<p>$${p.precio}</p>
<button onclick="agregarCarrito(${i})">Agregar</button>
</div>
`;
});
}

function agregarCarrito(i){
carrito.push(productos[i]);
mostrarAlerta("Producto agregado al carrito");
}

function renderCarrito(){
const container = document.getElementById("cartItems");
container.innerHTML="";

carrito.forEach((p,i)=>{
container.innerHTML+=`
<div class="cart-item">
<img src="${p.img}">
<div>
<b>${p.nombre}</b><br>
$${p.precio}
</div>
<button class="delete" onclick="eliminarProducto(${i})">X</button>
</div>
`;
});
}

function eliminarProducto(i){
carrito.splice(i,1);
renderCarrito();
}

function openModal(id){
document.getElementById(id).style.display="flex";
}

function closeModal(id){
document.getElementById(id).style.display="none";
}

document.getElementById("cartBtn").onclick=()=>{
if(carrito.length===0){
mostrarAlerta("No hay productos en el carrito");
return;
}
renderCarrito();
openModal("cartModal");
}

function openDatos(){
closeModal("cartModal");
openModal("datosModal");
}

function obtenerUbicacion(){

if(!navigator.geolocation){
mostrarAlerta("Tu navegador no permite geolocalizaci√≥n");
return;
}

navigator.geolocation.getCurrentPosition(
(pos)=>{
latitud = pos.coords.latitude;
longitud = pos.coords.longitude;

ubicacionLink = `https://www.google.com/maps?q=${latitud},${longitud}`;

document.getElementById("ubicacionTexto").innerHTML =
"Ubicaci√≥n obtenida correctamente ‚úî";
},
(err)=>{
mostrarAlerta("Debes permitir acceso a la ubicaci√≥n para continuar");
},
{enableHighAccuracy:true}
);

}

function validarEnvio(){

let nombre=document.getElementById("nombre").value.trim();
let apellido=document.getElementById("apellido").value.trim();

if(carrito.length===0){
mostrarAlerta("No hay productos en el carrito");
return;
}

if(!nombre || !apellido){
mostrarAlerta("Debes completar Nombre y Apellido");
return;
}

if(!ubicacionLink){
mostrarAlerta("Debes obtener tu ubicaci√≥n");
return;
}

mostrarConfirmacion();

}

function mostrarConfirmacion(){

document.getElementById("alertText").innerText =
"Para evitar p√©rdida y/o enga√±os ¬°Esperamos tu pago!";

document.getElementById("alertButtons").innerHTML = `
<br>
<button onclick="enviarWhatsApp()">Confirmar Env√≠o</button>
<br><br>
<button onclick="closeModal('alertModal')">Cancelar</button>
`;

openModal("alertModal");
}

function mostrarAlerta(texto){

document.getElementById("alertText").innerText = texto;

document.getElementById("alertButtons").innerHTML = `
<br>
<button onclick="closeModal('alertModal')">Aceptar</button>
`;

openModal("alertModal");
}

function enviarWhatsApp(){

let nombre=document.getElementById("nombre").value.trim();
let apellido=document.getElementById("apellido").value.trim();

let mensaje="üõí *Nuevo Pedido*%0A%0A";

carrito.forEach(p=>{
mensaje+=`‚Ä¢ ${p.nombre} - $${p.precio}%0A`;
});

mensaje+=`%0Aüë§ Cliente: ${nombre} ${apellido}%0A`;
mensaje+=`üìç Ubicaci√≥n: ${ubicacionLink}`;

window.open(`https://wa.me/584247515395?text=${mensaje}`,"_blank");

carrito=[];
ubicacionLink="";
latitud="";
longitud="";

closeModal("datosModal");
closeModal("alertModal");
closeModal("cartModal");

}

renderProductos();

</script>

</body>
</html>
