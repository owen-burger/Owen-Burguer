<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Owen Burguer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
:root{
--bg:#f2f2f2;
--card:#ffffff;
--text:#111;
--primary:#ff7a00;
--danger:#e53935;
--shadow:0 6px 18px rgba(0,0,0,0.08);
}
body{margin:0;font-family:Poppins,sans-serif;background:var(--bg);color:var(--text);}
header{background:linear-gradient(135deg,#ff7a00,#ffb347);color:#fff;padding:20px;text-align:center;font-size:22px;font-weight:700;}
.products{padding:15px;padding-bottom:110px;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;}
.card{background:var(--card);border-radius:15px;box-shadow:var(--shadow);overflow:hidden;cursor:pointer;transition:.3s;}
.card img{width:100%;height:120px;object-fit:cover;}
.card h4{margin:10px;font-size:14px;}
.price{margin:0 10px 10px;font-weight:700;color:var(--primary);}
button{background:var(--primary);border:none;padding:8px 12px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;margin:5px;}
.btn-danger{background:var(--danger);}
.bottom-nav{position:fixed;bottom:0;width:100%;background:var(--card);display:flex;justify-content:space-around;padding:10px 0;box-shadow:0 -3px 10px rgba(0,0,0,0.1);}
.nav-item{text-align:center;font-size:12px;cursor:pointer;position:relative;}
.nav-item.active{color:var(--primary);font-weight:700;}
.badge{position:absolute;top:-5px;right:15px;background:red;color:#fff;font-size:10px;padding:2px 6px;border-radius:50px;display:none;}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:999;}
.modal-content{background:var(--card);width:90%;max-width:420px;border-radius:20px;padding:20px;text-align:center;max-height:90vh;overflow:auto;}
.qty-controls{display:flex;justify-content:center;align-items:center;gap:15px;margin:15px 0;}
.qty-number{font-size:18px;font-weight:700;}
.cart-item{display:flex;gap:10px;margin-bottom:10px;background:var(--card);padding:8px;border-radius:10px;align-items:center;}
.cart-item img{width:60px;height:60px;object-fit:cover;border-radius:8px;}
.cart-info{flex:1;text-align:left;font-size:13px;}
.total{font-weight:700;margin-top:10px;font-size:16px;}
input{width:100%;padding:8px;margin:5px 0;border-radius:8px;border:1px solid #ccc;}
.hidden{display:none;}
</style>
</head>

<body>

<header>
<span id="secretAdmin">游꼢</span>
Owen Burguer
</header>

<div id="menu" class="products"></div>

<!-- MODAL PRODUCTO -->
<div class="modal" id="productModal">
<div class="modal-content">
<h3 id="modalTitle"></h3>
<p id="modalDesc"></p>
<div class="qty-controls">
<button onclick="changeQty(-1)">-</button>
<span class="qty-number" id="qtyNumber">1</span>
<button onclick="changeQty(1)">+</button>
</div>
<button onclick="addToCart()">Agregar</button>
<button class="btn-danger" onclick="closeModal()">Cancelar</button>
</div>
</div>

<!-- MODAL CARRITO -->
<div class="modal" id="cartModal">
<div class="modal-content">
<h3>Tu Pedido</h3>
<div id="cartItems"></div>
<div class="total" id="cartTotal"></div>

<button onclick="toggleData()">Tus Datos</button>

<div id="dataSection" class="hidden">
<input type="text" id="nombre" placeholder="Nombre">
<input type="text" id="apellido" placeholder="Apellido">
<button onclick="getLocation()">Obtener Ubicaci칩n</button>
<p id="locationStatus" style="font-size:12px;"></p>
</div>

<button onclick="sendOrder()">Enviar Pedido</button>
<button class="btn-danger" onclick="closeCart()">Cerrar</button>
</div>
</div>

<!-- MODAL ALERTA -->
<div class="modal" id="alertModal">
<div class="modal-content">
<p id="alertMessage"></p>
<div id="alertButtons">
<button onclick="closeAlert()">Aceptar</button>
</div>
</div>
</div>

<!-- NAVBAR -->
<div class="bottom-nav">
<div class="nav-item active" onclick="showCategory('Hamburguesas',this)">游꼢<br>Hamburguesas</div>
<div class="nav-item" onclick="showCategory('Perros',this)">游꺐<br>Perros</div>
<div class="nav-item" onclick="showCategory('Bebidas',this)">游볷<br>Bebidas</div>
<div class="nav-item" onclick="openCart()">游<br>Carrito
<span id="cartBadge" class="badge"></span>
</div>
</div>

<script>

/* ALERTA */
function showAlert(msg){
document.getElementById("alertMessage").innerText=msg;
document.getElementById("alertButtons").innerHTML='<button onclick="closeAlert()">Aceptar</button>';
document.getElementById("alertModal").style.display="flex";
}
function closeAlert(){
document.getElementById("alertModal").style.display="none";
}

/* PRODUCTOS */
/* PRODUCTOS BASE */
const baseCategories = {
Hamburguesas:[
{name:"Cl치sica",price:5,desc:"Carne, lechuga, tomate y queso",img:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd"},
{name:"Doble Carne",price:7,desc:"Doble carne y doble queso",img:"https://images.unsplash.com/photo-1550547660-d9450f859349"}
],
Perros:[
{name:"Tradicional",price:4,desc:"Con papitas y salsa",img:"https://images.unsplash.com/photo-1612392062798-2a5f9f9c38af"}
],
Bebidas:[
{name:"Coca Cola",price:1.5,desc:"Refresco fr칤o",img:"https://images.unsplash.com/photo-1580910051074-3eb694886505"}
]};

/* CARGAR PRODUCTOS ADMIN */
let adminProducts = JSON.parse(localStorage.getItem("adminProducts")) || {};

/* MEZCLAR PRODUCTOS BASE + ADMIN */
let categories = {};

function mergeProducts(){
categories = JSON.parse(JSON.stringify(baseCategories));

for(let cat in adminProducts){
if(!categories[cat]){
categories[cat] = [];
}
categories[cat] = categories[cat].concat(adminProducts[cat]);
}
}

mergeProducts();

let cart=JSON.parse(localStorage.getItem("cart"))||{};
let currentCategory="Hamburguesas";
let selectedProduct=null;
let modalQty=1;
let userLocation=null;

/* MEN칔 */
function renderMenu(){
let menu=document.getElementById("menu");
menu.innerHTML="";
categories[currentCategory].forEach(prod=>{
let card=document.createElement("div");
card.className="card";
card.innerHTML=`<img src="${prod.img}"><h4>${prod.name}</h4><div class="price">$${prod.price}</div>`;
card.onclick=()=>openProduct(prod);
menu.appendChild(card);
});
}
renderMenu();

function showCategory(cat,el){
currentCategory=cat;
document.querySelectorAll(".nav-item").forEach(i=>i.classList.remove("active"));
if(el)el.classList.add("active");
renderMenu();
}

/* PRODUCTO */
function openProduct(prod){
selectedProduct=prod;
modalQty=1;
document.getElementById("qtyNumber").innerText=1;
document.getElementById("modalTitle").innerText=prod.name;
document.getElementById("modalDesc").innerText=prod.desc;
document.getElementById("productModal").style.display="flex";
}
function closeModal(){ document.getElementById("productModal").style.display="none"; }
function changeQty(val){ modalQty=Math.max(1,modalQty+val); document.getElementById("qtyNumber").innerText=modalQty; }
function addToCart(){
let key=selectedProduct.name;
if(cart[key]) cart[key].qty+=modalQty;
else cart[key]={...selectedProduct,qty:modalQty};
saveCart();
closeModal();
}

/* CARRITO */
function openCart(){
if(Object.keys(cart).length===0){ showAlert("El carrito est치 vac칤o."); return; }
renderCart();
document.getElementById("cartModal").style.display="flex";
}
function closeCart(){ document.getElementById("cartModal").style.display="none"; }

function renderCart(){
let container=document.getElementById("cartItems");
container.innerHTML="";
let total=0;
for(let key in cart){
let item=cart[key];
let subtotal=item.price*item.qty;
total+=subtotal;
container.innerHTML+=`
<div class="cart-item">
<img src="${item.img}">
<div class="cart-info">
<strong>${item.name}</strong><br>
Precio: $${item.price}<br>
Cantidad: ${item.qty}<br>
Subtotal: $${subtotal.toFixed(2)}<br>
<button class="btn-danger" onclick="removeItem('${key}')">Eliminar</button>
</div>
</div>`;
}
document.getElementById("cartTotal").innerText="Total: $"+total.toFixed(2);
}

function removeItem(key){ delete cart[key]; saveCart(); renderCart(); }
function saveCart(){ localStorage.setItem("cart",JSON.stringify(cart)); updateBadge(); }
function updateBadge(){
let total=0; for(let i in cart){ total+=cart[i].qty; }
let badge=document.getElementById("cartBadge");
badge.innerText=total;
badge.style.display=total>0?"inline-block":"none";
}
updateBadge();

/* DATOS */
function toggleData(){ document.getElementById("dataSection").classList.toggle("hidden"); }

function getLocation(){
navigator.geolocation.getCurrentPosition(
pos=>{
userLocation=`https://maps.google.com/?q=${pos.coords.latitude},${pos.coords.longitude}`;
document.getElementById("locationStatus").innerText="Ubicaci칩n obtenida correctamente.";
},
()=>{ showAlert("No se pudo obtener la ubicaci칩n."); }
);
}

/* ENV칈O CON CONFIRMACI칍N */
function sendOrder(){

if(Object.keys(cart).length===0){ showAlert("El carrito est치 vac칤o."); return; }

let nombre=document.getElementById("nombre").value.trim();
let apellido=document.getElementById("apellido").value.trim();

if(!nombre || !apellido){ showAlert("Debes ingresar Nombre y Apellido."); return; }
if(!userLocation){ showAlert("Debes obtener la ubicaci칩n."); return; }

let total=0, detalle="";
for(let key in cart){
let item=cart[key];
let subtotal=item.price*item.qty;
total+=subtotal;
detalle+=`${item.name} x${item.qty} - $${subtotal.toFixed(2)}%0A`;
}

let mensaje=`Pedido Owen Burguer%0A%0ACliente: ${nombre} ${apellido}%0A%0A${detalle}%0ATotal: $${total.toFixed(2)}%0A%0AUbicaci칩n:%0A${userLocation}`;

document.getElementById("alertMessage").innerHTML=
"Para evitar p칠rdida y/o enga침os 춰Esperamos tu pago!<br><br>";

document.getElementById("alertButtons").innerHTML=
`<button onclick="confirmSend('${mensaje}')">Confirmar Env칤o</button>
<button class="btn-danger" onclick="closeAlert()">Cancelar</button>`;

document.getElementById("alertModal").style.display="flex";
}

function confirmSend(mensaje){
window.open(`https://wa.me/584247515395?text=${mensaje}`,"_blank");
cart={};
saveCart();
closeCart();
closeAlert();
}

</script>
</body>
</html>
